import{d as v,t as h,u as l,o as d,c as p,a as o,w as C,v as A,r as k,b as x,e as $,f as B,g as F,m as q,F as E,h as w,i as L,j as M,k as I,l as O,n as N,p as T,q as j,s as G,x as U}from"./vendor.36c21030.js";const V=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&u(f)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}};V();const P=["\u30B9\u30D4\u30FC\u30C9","\u30B9\u30BF\u30DF\u30CA","\u30D1\u30EF\u30FC","\u6839\u6027","\u8CE2\u3055","\u30E1\u30E2\u5E33","\u6226\u8853\u66F8","\u79D8\u4F1D\u66F8","\u30C8\u30EC\u30FC\u30CB\u30F3\u30B0","\u30E1\u30AC\u30DB\u30F3","\u30BF\u30FC\u30F3","\u30A6\u30A7\u30A4\u30C8","\u8E44\u9244","\u30D0\u30A4\u30BF\u30EB","\u30C9\u30EA\u30F3\u30AF","\u30B1\u30FC\u30AD","\u7D46\u30B2\u30FC\u30B8","\u3084\u308B\u6C17","\u4F53\u529B","\u306B\u306A\u308B","\u89E3\u6D88","\u30EC\u30FC\u30B9","\u30FB","\u306E","\u30FC","\u30E5","\u30C3"];var D=(n=>(n.SINGLE_MODE_ITEM_SELECT="SINGLE_MODE_ITEM_SELECT",n.LOG="LOG",n))(D||{});function R(){const n=document.getElementById("data");if(!n)throw new Error("'#data' element not found");return JSON.parse(n.innerHTML)}const b=R(),H=v({props:{pageData:{type:Object,required:!0}},setup(n){return(c,s)=>h(l(b))}}),K={class:"text-left"},J={class:"border-b border-gray-200"},z={class:"font-bold"},Q={class:"text-sm"},W=o("span",{class:"bg-gray-200 rounded-lg px-1 mr-2"},"\u52B9\u679C",-1),X={class:"font-bold"},S=v({props:{value:{type:Object,required:!0},idHidden:{type:Boolean}},setup(n){return(c,s)=>(d(),p("div",K,[o("p",J,[o("span",z,h(n.value.name),1),C(o("span",{class:"text-sm float-right"},h(n.value.id),513),[[A,!n.idHidden]])]),o("p",Q,[W,o("span",X,h(n.value.description),1)])]))}}),Y={class:"max-w-lg m-auto space-y-2"},Z={class:"bg-gray-200 sticky top-0 space-y-2"},ee={class:"text-center bg-white p-1 rounded"},te=o("p",null,"select matching item for this image:",-1),ne=["src"],se=["action"],ae=o("span",{class:"bg-gray-200 mx-2 rounded-full px-4"},"id",-1),re=o("button",{type:"submit",class:"bg-theme-green text-white rounded p-2 font-bold"}," \u78BA\u8A8D ",-1),oe={class:"space-y-1"},ue={class:"w-full flex items-center"},ce={class:"inline align-top fill-current h-8",viewBox:"0 0 24 24"},ie=["d"],le={class:"flex gap-1 flex-wrap"},de={class:"space-y-2"},pe=v({props:{pageData:{type:Object,required:!0}},setup(n){var m;const c=n,s=k({id:(m=c.pageData.defaultValue)!=null?m:0,q:""});function u(t){return[t.name,t.description]}function e(t,a){const i=u(t);return a.split(" ").every(_=>i.some(y=>y.includes(_)))}const r=x(()=>c.pageData.options.filter(t=>e(t,s.q)).map(t=>{const a=t.id===s.id;return{key:t.id,value:t,attrs:{class:["border border-2 cursor-pointer",a?"border-theme-green":"border-gray-200"],onClick:()=>{s.id=t.id}}}})),f=x(()=>P.map(t=>{const a=r.value.filter(i=>e(i.value,t)).length;return{key:t,value:t,matchCount:a,attrs:{class:[(()=>a===0?"bg-gray-400 text-white":a===1?"bg-theme-green text-white":"bg-white text-theme-text")()],onClick:()=>{r.value.length!==a&&(s.q=a?`${s.q} ${t}`.trim():t)}}}})),g=x(()=>{var t;return(t=c.pageData.options.find(a=>a.id===s.id))!=null?t:{id:s.id,name:"unknown",description:"unknown"}});return $(()=>{r.value.length===1&&(s.id=r.value[0].value.id)}),(t,a)=>(d(),p("div",Y,[o("div",Z,[o("div",ee,[te,o("img",{src:l(b).imageURL,class:"sticky m-auto"},null,8,ne),o("form",{action:l(b).submitURL,method:"POST",class:"flex items-center justify-center gap-2 mx-2"},[o("label",null,[ae,C(o("input",{"onUpdate:modelValue":a[0]||(a[0]=i=>l(s).id=i),type:"number",name:"id",class:"spin-button-none w-16 text-center"},null,512),[[B,l(s).id,void 0,{number:!0}]])]),F(S,{value:l(g),class:"inline-block border border-gray-200 flex-auto rounded px-2","id-hidden":""},null,8,["value"]),re],8,se)]),o("div",oe,[o("label",ue,[(d(),p("svg",ce,[o("path",{d:l(q)},null,8,ie)])),C(o("input",{"onUpdate:modelValue":a[1]||(a[1]=i=>l(s).q=i),class:"flex-auto",type:"search",placeholder:"search"},null,512),[[B,l(s).q]])]),o("ol",le,[(d(!0),p(E,null,w(l(f),({key:i,value:_,attrs:y})=>(d(),p("li",L({key:i,class:"cursor-pointer inline-block rounded px-1"},y),h(_),17))),128))])])]),o("ul",de,[(d(!0),p(E,null,w(l(r),({key:i,attrs:_,value:y})=>(d(),p("li",L({key:i,class:"bg-white rounded p-2"},_),[F(S,{value:y},null,8,["value"])],16))),128))])]))}});function fe(){const n=[],c=u=>{n.push(u)},s=()=>{var u;for(;n.length>0;)(u=n.pop())==null||u()};return M()&&I(s),{addCleanup:c,cleanup:s}}async function me({stream:n,encoding:c="utf-8",onLine:s}){const u=n.getReader();let e="";const r=new TextDecoder(c);async function f(){const{value:g,done:m}=await u.read();if(m){e&&await s(e);return}const t=r.decode(g);let a=0;for(let i=0;i<t.length;i+=1)t[i]===`
`&&(await s(e+t.slice(a,i)),a=i+1,e="");e+=t.slice(a),await f()}await f()}function he(n,c){return(...s)=>{n.value+=1;let u=!1;try{const e=c(...s);return e instanceof Promise&&(u=!0,e.finally(()=>{n.value-=1})),e}finally{u||(n.value-=1)}}}const ge=v({props:{pageData:{type:Object,required:!0}},setup(n){const c=n,s=O(),u=k([]),e=O(0),{addCleanup:r,cleanup:f}=fe();return N(()=>c.pageData.streamURL,he(e,async g=>{f();const m=new AbortController;r(()=>m.abort());const{body:t}=await fetch(g,{signal:m.signal});!t||await me({stream:t,onLine:a=>{u.push(Object.freeze(JSON.parse(a)))}})}),{immediate:!0}),(g,m)=>(d(),p("div",null,[T(" loadingCount: "+h(e.value)+" ",1),o("ol",{ref_key:"host",ref:s},[(d(!0),p(E,null,w(l(u),(t,a)=>(d(),p("li",{key:a},h(t),1))),128))],512)]))}}),_e={class:"bg-gray-200 text-theme-text min-h-screen"},ye=v({setup(n){var u;const s=(u=new Map([[D.SINGLE_MODE_ITEM_SELECT,{component:pe}],[D.LOG,{component:ge}]]).get(b.type))!=null?u:{component:H};return(e,r)=>(d(),p("div",_e,[(d(),j(G(l(s).component),{"page-data":l(b)},null,8,["page-data"]))]))}});U(ye).mount("#app");
